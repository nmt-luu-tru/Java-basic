### Sự khác biệt giữa lớp trừu tượng và interface trong Java

Trong phần này, chúng ta sẽ so sánh **lớp trừu tượng (abstract class)** và **interface** trong Java, nêu bật các điểm khác biệt và giải thích khi nào nên sử dụng mỗi loại.

#### 1. **Lớp trừu tượng**
Lớp trừu tượng rất giống với interface ở chỗ không thể tạo đối tượng trực tiếp từ chúng, nhưng chúng có những đặc điểm khác biệt:
- **Có thể có cả phương thức trừu tượng và phương thức cụ thể**: Không giống như interface (trước Java 8 chỉ chứa phương thức trừu tượng), lớp trừu tượng có thể chứa các phương thức trừu tượng (không có thân) hoặc các phương thức cụ thể (có thân phương thức).
- **Có thể có trường (field)**: Lớp trừu tượng có thể khai báo các trường không phải là **static** và **final**. Những trường này có thể được kế thừa và sử dụng trong các lớp con.
- **Có thể sử dụng các cấp độ truy cập khác nhau**: Bạn có thể khai báo các phương thức và trường với các mức truy cập như **public**, **protected**, và **private**, cung cấp sự kiểm soát chi tiết hơn về khả năng truy cập.
- **Chỉ hỗ trợ đơn kế thừa**: Lớp trừu tượng chỉ có thể mở rộng từ một lớp cha duy nhất (do Java không hỗ trợ đa kế thừa lớp), nhưng nó có thể triển khai nhiều interface.
- **Chia sẻ mã chung**: Khi một lớp trừu tượng được mở rộng, các lớp con thường phải triển khai tất cả các phương thức trừu tượng của nó. Nếu không, lớp con cũng phải được khai báo là lớp trừu tượng.

##### Khi nào nên sử dụng lớp trừu tượng:
- **Chia sẻ mã giữa các lớp liên quan**: Sử dụng lớp trừu tượng khi bạn muốn chia sẻ mã giữa các lớp có liên quan chặt chẽ. Ví dụ: một lớp `Animal` (động vật) có thể chứa các trường như `name` và `age` mà tất cả các lớp con (như `Dog`, `Cat`) đều kế thừa.
- **Phương thức và trường chung**: Nếu bạn kỳ vọng rằng các lớp con sẽ có nhiều phương thức hoặc trường chung, hoặc cần sử dụng các mức truy cập khác nhau, lớp trừu tượng sẽ phù hợp hơn.
- **Trường không phải static hoặc final**: Nếu bạn cần các trường không phải static hoặc final, lớp trừu tượng sẽ cung cấp sự linh hoạt này.
- **Hành vi mặc định**: Khi một số phương thức cần có triển khai mặc định nhưng các phương thức khác cần được ghi đè bởi lớp con, lớp trừu tượng sẽ hữu ích.

##### Ví dụ về lớp trừu tượng:
```java
abstract class Animal {
    private String name;
    private int age;

    public Animal(String name, int age) {
        this.name = name;
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    // Phương thức trừu tượng
    public abstract void makeSound();  // Các lớp con phải triển khai phương thức này
}
```

#### 2. **Interface**
Interface là một kiểu trừu tượng hoàn toàn, định nghĩa những gì một lớp có thể làm, nhưng không mô tả cách làm điều đó:
- **Chỉ có chữ ký phương thức**: Ban đầu, interface chỉ chứa các phương thức trừu tượng, nhưng từ Java 8 trở đi, interface có thể có các phương thức mặc định (có thân phương thức) và các phương thức tĩnh.
- **Mặc định là công khai và trừu tượng**: Tất cả các phương thức trong interface đều tự động là **public** và **abstract**, trừ khi được khai báo rõ ràng là mặc định hoặc tĩnh.
- **Hỗ trợ đa kế thừa**: Một lớp có thể triển khai nhiều interface, cho phép xây dựng hệ thống linh hoạt hơn.
- **Không có trường dữ liệu riêng**: Interface không thể chứa các trường dữ liệu. Chúng chỉ có thể chứa các biến **public**, **static**, và **final** (biến hằng).
- **Hợp đồng giữa lớp và thế giới bên ngoài**: Interface định nghĩa một hợp đồng mà các lớp phải tuân thủ, và điều này được kiểm tra tại thời điểm biên dịch.

##### Khi nào nên sử dụng Interface:
- **Các lớp không liên quan thực thi cùng một hành vi**: Sử dụng interface khi bạn muốn các lớp **không liên quan** đều thực thi cùng một bộ phương thức. Ví dụ: `Comparable` và `Cloneable` là các interface được nhiều lớp không liên quan thực thi.
- **Định nghĩa hành vi mà không cần quan tâm đến triển khai**: Khi bạn chỉ quan tâm đến việc một lớp có khả năng thực thi một số hành vi, nhưng không quan tâm đến cách nó thực hiện, interface là lựa chọn tốt.
- **Tách biệt hành vi**: Sử dụng interface để tách biệt các hành vi khác nhau. Ví dụ, một lớp có thể thực thi cả interface `Flyable` (có thể bay) và `Swimmable` (có thể bơi) mà không bị ràng buộc vào một hệ thống phân cấp cụ thể.

##### Ví dụ về Interface:
```java
interface Flyable {
    void fly();  // Phương thức không có thân
}

class Bird implements Flyable {
    @Override
    public void fly() {
        System.out.println("Chim đang bay");
    }
}

class Plane implements Flyable {
    @Override
    public void fly() {
        System.out.println("Máy bay đang bay");
    }
}
```

#### 3. **Sự khác biệt chính giữa lớp trừu tượng và interface**

| Đặc điểm                        | Lớp trừu tượng                                   | Interface                                      |
|---------------------------------|--------------------------------------------------|------------------------------------------------|
| Khả năng khởi tạo               | Không thể khởi tạo đối tượng                     | Không thể khởi tạo đối tượng                   |
| Loại phương thức                | Có thể có cả phương thức trừu tượng và cụ thể    | Ban đầu chỉ có phương thức trừu tượng; từ Java 8 có thể có phương thức mặc định và tĩnh |
| Trường dữ liệu                  | Có thể có các trường không phải static và final  | Chỉ có thể có các hằng số public static final |
| Cấp độ truy cập                 | Có thể sử dụng public, protected, private        | Các phương thức mặc định là public và abstract |
| Kế thừa                         | Chỉ hỗ trợ đơn kế thừa                            | Hỗ trợ đa kế thừa                              |
| Mục đích sử dụng                | Dùng khi chia sẻ mã giữa các lớp liên quan       | Dùng khi các lớp không liên quan cần thực thi cùng hành vi |
| Phương thức mặc định            | Có thể có phương thức cụ thể với thân phương thức | Từ Java 8, có thể có phương thức mặc định      |
| Hàm tạo                         | Có thể có hàm tạo                                | Không thể có hàm tạo                           |

#### 4. **Khi nào nên sử dụng lớp trừu tượng và khi nào nên sử dụng interface**

- **Sử dụng lớp trừu tượng** khi:
  - Bạn có một lớp cơ sở chung mà nhiều lớp liên quan sẽ mở rộng.
  - Bạn muốn chia sẻ mã giữa các lớp liên quan.
  - Bạn cần các phương thức hoặc trường với các mức truy cập khác nhau (private, protected, public).
  - Bạn muốn cung cấp triển khai mặc định cho một số phương thức nhưng cho phép ghi đè các phương thức khác.

- **Sử dụng interface** khi:
  - Bạn cần các lớp không liên quan thực thi cùng một hành vi.
  - Bạn muốn định nghĩa hành vi mà không cần quan tâm đến cách triển khai.
  - Bạn dự kiến lớp sẽ thực thi nhiều hành vi (nhiều interface).
  - Bạn muốn tách biệt các hành vi, đặc biệt nếu các hành vi có thể thay đổi nhiều giữa các lớp thực thi khác nhau.

### Tóm tắt
- **Lớp trừu tượng** phù hợp khi bạn cần chia sẻ mã giữa các lớp liên quan và cho phép chia sẻ hành vi chung.
- **Interface** thích hợp khi bạn cần định nghĩa hợp đồng hành vi mà nhiều lớp, có thể không liên quan, sẽ thực hiện, đồng thời cho phép tính linh hoạt trong cách thức triển khai.
